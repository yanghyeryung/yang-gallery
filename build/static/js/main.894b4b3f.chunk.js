(this["webpackJsonpyang-gallery"]=this["webpackJsonpyang-gallery"]||[]).push([[0],{33:function(e,t,a){e.exports=a(54)},54:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),l=a(30),r=a.n(l),c=a(31),s=a(3),o=a(22),d=a.n(o),u=a(12),m=a(13),h=a(9),v=a(15),b=a(14),g=a(11),f=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).login=n.login.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"login",value:function(){var e=this,t=this.refs.id.value,a=g.database(),n=this.props.history;a.ref("user/"+t).once("value").then((function(a){var i=a.val();i&&i.id===t&&i.pwd===e.refs.pwd.value?(d.a.set("authToken",i.id),n.push("/")):alert("\ub85c\uadf8\uc778 \uc2e4\ud328!")}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"login-view"},i.a.createElement("input",{ref:"id",placeholder:"id",type:"text"}),i.a.createElement("input",{ref:"pwd",placeholder:"pwd",type:"password"}),i.a.createElement("button",{onClick:this.login},"login"))}}]),a}(i.a.Component),p=a(24),y=a(25),E=a.n(y),k=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={arts:{},detail:{},editMode:!1},n.database=g.database(),n.add=n.add.bind(Object(h.a)(n)),n.edit=n.edit.bind(Object(h.a)(n)),n.delete=n.delete.bind(Object(h.a)(n)),n.save=n.save.bind(Object(h.a)(n)),n.changeDetail=n.changeDetail.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.database.ref("art").on("value",(function(t){var a={};t.forEach((function(e){var t=e.val();a[e.key]={key:e.key,title:t.title,image:t.image,desc:t.desc,date:t.date}})),e.setState({arts:a})}))}},{key:"componentWillUnmount",value:function(){this.database.ref("art").off("value")}},{key:"add",value:function(){this.setState({editMode:!0,detail:{}})}},{key:"edit",value:function(e){var t=e.currentTarget.getAttribute("data-key");this.setState({editMode:!0,detail:Object.assign({},this.state.arts[t])})}},{key:"delete",value:function(e){var t=e.currentTarget.getAttribute("data-key");this.database.ref("art/"+t).remove().then((function(){alert("\uc0ad\uc81c \uc131\uacf5")})).catch((function(){alert("\uc0ad\uc81c \uc2e4\ud328")}))}},{key:"save",value:function(e){var t=this;e.preventDefault();var a=Object.assign({date:E()().format("YYYY/MM/DD")},this.state.detail);if(a.key)this.database.ref("art/"+a.key).set(a).then((function(){alert("\uc218\uc815 \uc131\uacf5"),t.setState({editMode:!1})})).catch((function(){alert("\uc218\uc815 \uc2e4\ud328")}));else{a.key=this.state.detail.title+"-"+E()().format("YYYYMMDDhhmmss");var n=Object.assign(Object(p.a)({},a.key,a),this.state.arts);this.database.ref("art").set(n).then((function(){alert("\ucd94\uac00 \uc131\uacf5"),t.setState({editMode:!1})})).catch((function(){alert("\ucd94\uac00 \uc2e4\ud328")}))}}},{key:"changeDetail",value:function(e){this.setState({detail:Object.assign({},this.state.detail,Object(p.a)({},e.target.name,e.target.value))})}},{key:"render",value:function(){var e=[];for(var t in this.state.arts)if(this.state.arts.hasOwnProperty(t)){var a=this.state.arts[t];e.push(i.a.createElement("li",null,i.a.createElement("div",{className:"title"},a.title),i.a.createElement("div",{className:"image"},a.image),i.a.createElement("div",{className:"desc"},a.desc),i.a.createElement("div",{className:"date"},a.date),i.a.createElement("button",{onClick:this.edit,"data-key":t},"edit"),i.a.createElement("button",{onClick:this.delete,"data-key":t},"delete")))}return i.a.createElement("div",{className:"gallery-view"},!this.state.editMode&&i.a.createElement("button",{className:"btn",onClick:this.add},"+"),this.state.editMode?i.a.createElement("form",null,i.a.createElement("div",{className:"form-item"},i.a.createElement("label",null,"title"),i.a.createElement("input",{name:"title",value:this.state.detail.title,onChange:this.changeDetail})),i.a.createElement("div",{className:"form-item"},i.a.createElement("label",null,"image"),i.a.createElement("input",{name:"image",value:this.state.detail.image,onChange:this.changeDetail})),i.a.createElement("div",{className:"form-item"},i.a.createElement("label",null,"desc"),i.a.createElement("input",{name:"desc",value:this.state.detail.desc,onChange:this.changeDetail})),i.a.createElement("button",{onClick:this.save},"save")):i.a.createElement("ul",null,e))}}]),a}(i.a.Component),O=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(m.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"guest-book-view"},"GuestBook")}}]),a}(i.a.Component),j=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={activeTabMode:"gallery"},n.changeMode=n.changeMode.bind(Object(h.a)(n)),n}return Object(m.a)(a,[{key:"changeMode",value:function(e){var t=e.currentTarget.getAttribute("data-mode");this.setState({activeTabMode:t})}},{key:"render",value:function(){return i.a.createElement("div",{className:"main-view"},i.a.createElement("div",{className:"header"},i.a.createElement("span",{className:"title"},"YangGallery")),i.a.createElement("button",{onClick:this.changeMode,"data-mode":"gallery"},"Gallery"),i.a.createElement("button",{onClick:this.changeMode,"data-mode":"guestbook"},"GuestBook"),"gallery"===this.state.activeTabMode&&i.a.createElement(k,null),"guestbook"===this.state.activeTabMode&&i.a.createElement(O,null))}}]),a}(i.a.Component);var M=function(){return i.a.createElement("div",{className:"app-view"},i.a.createElement(c.a,null,i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/login",component:f}),i.a.createElement(s.b,{render:function(){return d.a.get("authToken")?i.a.createElement(j,null):i.a.createElement(s.a,{to:"/login"})}}))))};g.initializeApp({apiKey:"AIzaSyANJcTL5OSYVkWhJ2x1on4w242qq_AcqRY",authDomain:"yang-gallery.firebaseapp.com",databaseURL:"https://yang-gallery.firebaseio.com",projectId:"yang-gallery",storageBucket:"yang-gallery.appspot.com",messagingSenderId:"1054961998752",appId:"1:1054961998752:web:754a332c24ff3c244f22c5"}),r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(M,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.894b4b3f.chunk.js.map