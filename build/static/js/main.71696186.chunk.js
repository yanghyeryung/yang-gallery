(this["webpackJsonpyang-gallery"]=this["webpackJsonpyang-gallery"]||[]).push([[0],{33:function(e,t,a){e.exports=a(54)},54:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),l=a(30),r=a.n(l),c=a(31),s=a(4),o=a(19),d=a.n(o),u=a(7),h=a(8),m=a(3),v=a(10),b=a(9),f=a(15),g=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).login=n.login.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"login",value:function(){var e=this,t=this.refs.id.value,a=f.database(),n=this.props.history;a.ref("user/"+t).once("value").then((function(a){var i=a.val();i&&i.id===t&&i.pwd===e.refs.pwd.value?(d.a.set("authToken",i.id),n.push("/")):alert("\ub85c\uadf8\uc778 \uc2e4\ud328!")}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"login-wrap"},i.a.createElement("input",{ref:"id",placeholder:"id",type:"text"}),i.a.createElement("input",{ref:"pwd",placeholder:"pwd",type:"password"}),i.a.createElement("button",{onClick:this.login},"login"))}}]),a}(i.a.Component),y=a(20),k=a(21),E=a.n(k),p=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.art,a=e.editFn,n=e.deleteFn;return i.a.createElement("div",{className:"art-wrap"},i.a.createElement("div",{className:"title"},t.title),i.a.createElement("div",{className:"image"},t.image),i.a.createElement("div",{className:"desc"},t.desc),i.a.createElement("div",{className:"date"},t.date),i.a.createElement("button",{onClick:a,"data-key":t.key},"edit"),i.a.createElement("button",{onClick:n,"data-key":t.key},"delete"))}}]),a}(i.a.Component),O=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={arts:{},detail:{},editMode:!1},n.database=f.database(),n.add=n.add.bind(Object(m.a)(n)),n.edit=n.edit.bind(Object(m.a)(n)),n.delete=n.delete.bind(Object(m.a)(n)),n.save=n.save.bind(Object(m.a)(n)),n.changeDetail=n.changeDetail.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.database.ref("art").on("value",(function(t){var a={};t.forEach((function(e){var t=e.val();a[e.key]={key:e.key,title:t.title,image:t.image,desc:t.desc,date:t.date}})),e.setState({arts:a})}))}},{key:"componentWillUnmount",value:function(){this.database.ref("art").off("value")}},{key:"add",value:function(){this.setState({editMode:!0,detail:{}})}},{key:"edit",value:function(e){var t=e.currentTarget.getAttribute("data-key");this.setState({editMode:!0,detail:Object.assign({},this.state.arts[t])})}},{key:"delete",value:function(e){var t=e.currentTarget.getAttribute("data-key");this.database.ref("art/"+t).remove().then((function(){alert("\uc0ad\uc81c \uc131\uacf5")})).catch((function(){alert("\uc0ad\uc81c \uc2e4\ud328")}))}},{key:"save",value:function(e){var t=this;e.preventDefault();var a=Object.assign({date:E()().format("YYYY/MM/DD")},this.state.detail);if(a.key)this.database.ref("art/"+a.key).set(a).then((function(){alert("\uc218\uc815 \uc131\uacf5"),t.setState({editMode:!1})})).catch((function(){alert("\uc218\uc815 \uc2e4\ud328")}));else{a.key=this.state.detail.title+"-"+E()().format("YYYYMMDDhhmmss");var n=Object.assign(Object(y.a)({},a.key,a),this.state.arts);this.database.ref("art").set(n).then((function(){alert("\ucd94\uac00 \uc131\uacf5"),t.setState({editMode:!1})})).catch((function(){alert("\ucd94\uac00 \uc2e4\ud328")}))}}},{key:"changeDetail",value:function(e){this.setState({detail:Object.assign({},this.state.detail,Object(y.a)({},e.target.name,e.target.value))})}},{key:"render",value:function(){var e=[];for(var t in this.state.arts)if(this.state.arts.hasOwnProperty(t)){var a=this.state.arts[t];e.push(i.a.createElement(p,{art:a,editFn:this.edit,deleteFn:this.delete}))}return i.a.createElement("div",{className:"gallery-wrap"},!this.state.editMode&&i.a.createElement("button",{className:"btn",onClick:this.add},"+"),this.state.editMode?i.a.createElement("form",null,i.a.createElement("div",{className:"form-item"},i.a.createElement("label",null,"title"),i.a.createElement("input",{name:"title",value:this.state.detail.title,onChange:this.changeDetail})),i.a.createElement("div",{className:"form-item"},i.a.createElement("label",null,"image"),i.a.createElement("input",{name:"image",value:this.state.detail.image,onChange:this.changeDetail})),i.a.createElement("div",{className:"form-item"},i.a.createElement("label",null,"desc"),i.a.createElement("input",{name:"desc",value:this.state.detail.desc,onChange:this.changeDetail})),i.a.createElement("button",{onClick:this.save},"save")):i.a.createElement("div",null,e))}}]),a}(i.a.Component),j=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.article,a=e.editFn,n=e.deleteFn;return i.a.createElement("div",{className:"art-wrap"},i.a.createElement("div",{className:"title"},t.title),i.a.createElement("div",{className:"name"},t.name),i.a.createElement("div",{className:"desc"},t.desc),i.a.createElement("div",{className:"date"},t.date),i.a.createElement("button",{onClick:a,"data-key":t.key},"edit"),i.a.createElement("button",{onClick:n,"data-key":t.key},"delete"))}}]),a}(i.a.Component),M=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={articles:{},detail:{},editMode:!1},n.database=f.database(),n.add=n.add.bind(Object(m.a)(n)),n.edit=n.edit.bind(Object(m.a)(n)),n.delete=n.delete.bind(Object(m.a)(n)),n.save=n.save.bind(Object(m.a)(n)),n.changeDetail=n.changeDetail.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentWillMount",value:function(){var e=this;this.database.ref("article").on("value",(function(t){var a={};t.forEach((function(e){var t=e.val();a[e.key]={key:e.key,title:t.title,name:t.name,desc:t.desc,date:t.date}})),e.setState({articles:a})}))}},{key:"componentWillUnmount",value:function(){this.database.ref("article").off("value")}},{key:"add",value:function(){this.setState({editMode:!0,detail:{}})}},{key:"edit",value:function(e){var t=e.currentTarget.getAttribute("data-key");this.setState({editMode:!0,detail:Object.assign({},this.state.articles[t])})}},{key:"delete",value:function(e){var t=e.currentTarget.getAttribute("data-key");this.database.ref("article/"+t).remove().then((function(){alert("\uc0ad\uc81c \uc131\uacf5")})).catch((function(){alert("\uc0ad\uc81c \uc2e4\ud328")}))}},{key:"save",value:function(e){var t=this;e.preventDefault();var a=Object.assign({date:E()().format("YYYY/MM/DD")},this.state.detail);if(a.key)this.database.ref("article/"+a.key).set(a).then((function(){alert("\uc218\uc815 \uc131\uacf5"),t.setState({editMode:!1})})).catch((function(){alert("\uc218\uc815 \uc2e4\ud328")}));else{a.key=this.state.detail.title+"-"+E()().format("YYYYMMDDhhmmss");var n=Object.assign(Object(y.a)({},a.key,a),this.state.articles);this.database.ref("article").set(n).then((function(){alert("\ucd94\uac00 \uc131\uacf5"),t.setState({editMode:!1})})).catch((function(){alert("\ucd94\uac00 \uc2e4\ud328")}))}}},{key:"changeDetail",value:function(e){this.setState({detail:Object.assign({},this.state.detail,Object(y.a)({},e.target.name,e.target.value))})}},{key:"render",value:function(){var e=[];for(var t in this.state.articles)if(this.state.articles.hasOwnProperty(t)){var a=this.state.articles[t];e.push(i.a.createElement(j,{article:a,editFn:this.edit,deleteFn:this.delete}))}return i.a.createElement("div",{className:"guest-book-wrap"},!this.state.editMode&&i.a.createElement("button",{className:"btn",onClick:this.add},"+"),this.state.editMode?i.a.createElement("form",null,i.a.createElement("div",{className:"form-item"},i.a.createElement("label",null,"title"),i.a.createElement("input",{name:"title",value:this.state.detail.title,onChange:this.changeDetail})),i.a.createElement("div",{className:"form-item"},i.a.createElement("label",null,"name"),i.a.createElement("input",{name:"name",value:this.state.detail.name,onChange:this.changeDetail})),i.a.createElement("div",{className:"form-item"},i.a.createElement("label",null,"desc"),i.a.createElement("input",{name:"desc",value:this.state.detail.desc,onChange:this.changeDetail})),i.a.createElement("button",{onClick:this.save},"save")):i.a.createElement("div",null,e))}}]),a}(i.a.Component),C=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){return Object(u.a)(this,a),t.call(this,e)}return Object(h.a)(a,[{key:"render",value:function(){return i.a.createElement("div",{className:"artist-wrap"},i.a.createElement("div",null,"yanghyeryung@gmail.com"),i.a.createElement("div",null,"https://yanghyeryung.github.io"),i.a.createElement("div",null,"https://github.com/yanghyeryung"))}}]),a}(i.a.Component),N=function(e){Object(v.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={activeTabMode:"gallery",searchMode:!1},n.showSearchArt=n.showSearchArt.bind(Object(m.a)(n)),n.hideSearchArt=n.hideSearchArt.bind(Object(m.a)(n)),n.searchArt=n.searchArt.bind(Object(m.a)(n)),n.logout=n.logout.bind(Object(m.a)(n)),n.changeMode=n.changeMode.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"showSearchArt",value:function(){this.setState({searchMode:!0})}},{key:"hideSearchArt",value:function(){this.setState({searchMode:!1})}},{key:"searchArt",value:function(e){"Enter"===e.key&&alert(this.refs.search.value)}},{key:"logout",value:function(){var e=this.props.history;d.a.remove("authToken"),e.push("/login")}},{key:"changeMode",value:function(e){var t=e.currentTarget.getAttribute("data-mode");this.setState({activeTabMode:t})}},{key:"render",value:function(){var e=this.state,t=e.activeTabMode,a=e.searchMode;return i.a.createElement("div",{className:"main-wrap"},i.a.createElement("div",{className:"header"},i.a.createElement("span",{className:"title"},"YangGallery"),a?i.a.createElement("div",{className:"search-wrap"},i.a.createElement("input",{ref:"search",onKeyDown:this.searchArt}),i.a.createElement("button",{onClick:this.hideSearchArt},"x")):i.a.createElement("button",{onClick:this.showSearchArt},"search"),i.a.createElement("button",{onClick:this.logout},"logout")),i.a.createElement("button",{onClick:this.changeMode,"data-mode":"gallery"},"Gallery"),i.a.createElement("button",{onClick:this.changeMode,"data-mode":"guestbook"},"GuestBook"),i.a.createElement("button",{onClick:this.changeMode,"data-mode":"artist"},"Artist"),"gallery"===t&&i.a.createElement(O,null),"guestbook"===t&&i.a.createElement(M,null),"artist"===t&&i.a.createElement(C,null))}}]),a}(i.a.Component);var S=function(){return i.a.createElement("div",{className:"app-view"},i.a.createElement(c.a,null,i.a.createElement(s.d,null,i.a.createElement(s.b,{exact:!0,path:"/login",component:g}),i.a.createElement(s.b,{render:function(e){return d.a.get("authToken")?i.a.createElement(N,e):i.a.createElement(s.a,{to:"/login"})}}))))};f.initializeApp({apiKey:"AIzaSyANJcTL5OSYVkWhJ2x1on4w242qq_AcqRY",authDomain:"yang-gallery.firebaseapp.com",databaseURL:"https://yang-gallery.firebaseio.com",projectId:"yang-gallery",storageBucket:"yang-gallery.appspot.com",messagingSenderId:"1054961998752",appId:"1:1054961998752:web:754a332c24ff3c244f22c5"}),r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(S,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.71696186.chunk.js.map