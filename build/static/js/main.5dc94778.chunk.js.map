{"version":3,"sources":["views/Login.js","views/Gallery/Art.js","views/Gallery/index.js","views/GuestBook/Article.js","views/GuestBook/index.js","views/Artist/index.js","views/Main.js","App.js","index.js"],"names":["Login","props","login","bind","id","this","refs","value","database","firebase","history","ref","once","then","user","userVal","val","pwd","Cookies","set","push","alert","className","placeholder","type","onClick","React","Component","Art","art","editFn","deleteFn","title","src","image","width","desc","date","data-key","key","Gallery","state","arts","detail","editMode","storage","add","edit","delete","save","changeDetail","openUploadImagePopup","uploadImage","on","artMap","forEach","artVal","setState","off","e","currentTarget","getAttribute","Object","assign","remove","catch","preventDefault","moment","format","target","name","$","siblings","click","selectedFile","files","fileName","child","put","snapshot","getDownloadURL","downloadURL","artHtmlList","hasOwnProperty","onChange","accept","style","display","Article","article","GuestBook","articles","articleMap","articleVal","articleHtmlList","Artist","Main","activeTabMode","searchMode","showSearchArt","hideSearchArt","searchArt","logout","changeMode","search","mode","onKeyDown","data-mode","App","exact","path","component","render","get","to","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5dc94778.chunk.js","sourcesContent":["import React from 'react';\nimport * as firebase from 'firebase';\nimport Cookies from 'js-cookie';\n\nclass Login extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.login = this.login.bind(this);\n    }\n\n    login() {\n        const id = this.refs.id.value;\n        const database = firebase.database();\n        const {history} = this.props;\n\n        database.ref('user/' + id).once('value').then((user) => {\n            let userVal = user.val();\n\n            if (userVal && userVal.id === id && userVal.pwd === this.refs.pwd.value) {\n                Cookies.set('authToken', userVal.id);\n                history.push('/');\n            }else {\n                alert('로그인 실패!');\n            }\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"login-wrap\">\n                <input ref=\"id\" placeholder=\"id\" type=\"text\"/>\n                <input ref=\"pwd\" placeholder=\"pwd\" type=\"password\"/>\n                <button onClick={this.login}>login</button>\n            </div>\n        );\n    }\n}\n\nexport default Login;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Art extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const {art, editFn, deleteFn} = this.props;\n        return (\n            <div className=\"art-wrap\">\n                <div className=\"title\">{art.title}</div>\n                <img src={art.image} width=\"300\"></img>\n                <div className=\"desc\">{art.desc}</div>\n                <div className=\"date\">{art.date}</div>\n                <button onClick={editFn} data-key={art.key}>edit</button>\n                <button onClick={deleteFn} data-key={art.key}>delete</button>\n            </div>\n        );\n    }\n}\n\nArt.propTypes = {\n    art: PropTypes.shape({\n        title: PropTypes.string.isRequired,\n        image: PropTypes.string.isRequired,\n        desc: PropTypes.string,\n        date: PropTypes.string.isRequired,\n    }),\n    editFn: PropTypes.func.isRequired,\n    deleteFn: PropTypes.func.isRequired,\n};\n\nexport default Art;\n","import React from 'react';\nimport * as firebase from 'firebase';\nimport moment from 'moment';\nimport $ from 'jquery';\n\nimport Art from './Art';\n\nclass Gallery extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            arts: {},\n            detail: {},\n            editMode: false,\n        };\n\n        this.database = firebase.database();\n        this.storage = firebase.storage().ref();\n\n        this.add = this.add.bind(this);\n        this.edit = this.edit.bind(this);\n        this.delete = this.delete.bind(this);\n        this.save = this.save.bind(this);\n        this.changeDetail = this.changeDetail.bind(this);\n        this.openUploadImagePopup = this.openUploadImagePopup.bind(this);\n        this.uploadImage = this.uploadImage.bind(this);\n    }\n\n    componentWillMount() {\n        this.database.ref('art').on('value', (arts) => {\n            let artMap = {};\n\n            arts.forEach((art) => {\n                const artVal = art.val();\n\n                artMap[art.key] = {\n                    key: art.key,\n                    title: artVal.title,\n                    image: artVal.image,\n                    desc: artVal.desc,\n                    date: artVal.date,\n                };\n            });\n\n            this.setState({\n                arts: artMap,\n            });\n        });\n    }\n\n    componentWillUnmount() {\n        this.database.ref('art').off('value');\n    }\n\n    add() {\n        this.setState({\n            editMode: true,\n            detail: {},\n        });\n    }\n\n    edit(e) {\n        let key = e.currentTarget.getAttribute('data-key');\n\n        this.setState({\n            editMode: true,\n            detail: Object.assign({}, this.state.arts[key]),\n        });\n    }\n\n    delete(e) {\n        let key = e.currentTarget.getAttribute('data-key');\n\n        this.database.ref('art/' + key).remove()\n            .then(() => {\n                alert('삭제 성공');\n            })\n            .catch(() => {\n                alert('삭제 실패');\n            });\n    }\n\n    save(e) {\n        e.preventDefault();\n\n        let detail = Object.assign({date: moment().format('YYYY/MM/DD')}, this.state.detail);\n\n        if (detail.key) {\n            // 수정\n            this.database.ref('art/' + detail.key).set(detail)\n                .then(() => {\n                    alert('수정 성공');\n                    this.setState({\n                        editMode: false,\n                    });\n                })\n                .catch(() => {\n                    alert('수정 실패');\n                });\n        } else {\n            // 추가\n            detail.key = this.state.detail.title + '-' + moment().format('YYYYMMDDhhmmss');\n\n            let arts = Object.assign({[detail.key]: detail}, this.state.arts);\n\n            this.database.ref('art').set(arts)\n                .then(() => {\n                    alert('추가 성공');\n                    this.setState({\n                        editMode: false,\n                    });\n                })\n                .catch(() => {\n                    alert('추가 실패');\n                });\n        }\n    }\n\n    changeDetail(e) {\n        this.setState({\n            detail: Object.assign({}, this.state.detail, {[e.target.name]: e.target.value}),\n        });\n    }\n\n    openUploadImagePopup(e) {\n        e.preventDefault();\n        $(e.currentTarget).siblings('input').click();\n    }\n\n    uploadImage(e) {\n        const selectedFile = e.target.files[0];\n        const fileName = selectedFile.name;\n\n        this.storage.child(`images/${fileName}`).put(selectedFile)\n            .then((snapshot) => {\n                alert('이미지 추가 성공');\n\n                snapshot.ref.getDownloadURL().then((downloadURL) => {\n                    let detail = Object.assign({}, this.state.detail, {image: downloadURL});\n                    this.setState({\n                        detail: detail,\n                    });\n                });\n            })\n            .catch(() => {\n                alert('이미지 추가 실패');\n            });\n    }\n\n    render() {\n        const {detail, editMode, arts} = this.state;\n        const hideStyle = {display: 'none'};\n\n        let artHtmlList = [];\n\n        for (let key in arts) {\n            if (arts.hasOwnProperty(key)) {\n                let art = arts[key];\n                artHtmlList.push(<Art key={key} art={art} editFn={this.edit} deleteFn={this.delete}/>);\n            }\n        }\n\n        return (\n            <div className=\"gallery-wrap\">\n                {!editMode && <button className=\"btn\" onClick={this.add}>+</button>}\n                {\n                    editMode ?\n                        <form>\n                            <div className=\"form-item\">\n                                <label>title</label>\n                                <input name=\"title\" value={detail.title} onChange={this.changeDetail}/>\n                            </div>\n                            <div className=\"form-item\">\n                                <label>image</label>\n                                <input type=\"file\" accept=\"image/*\" name=\"image\" onChange={this.uploadImage} style={hideStyle} />\n                                <button onClick={this.openUploadImagePopup}>upload</button>\n                                {\n                                    this.state.detail.image && <img src={detail.image} width=\"300\"></img>\n                                }\n                            </div>\n                            <div className=\"form-item\">\n                                <label>desc</label>\n                                <input name=\"desc\" value={detail.desc} onChange={this.changeDetail}/>\n                            </div>\n                            <button onClick={this.save}>save</button>\n                        </form>\n                        :\n                        <div>\n                            {artHtmlList}\n                        </div>\n                }\n            </div>\n        );\n    }\n}\n\nexport default Gallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass Article extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        const {article, editFn, deleteFn} = this.props;\n\n        return (\n            <div className=\"art-wrap\">\n                <div className=\"title\">{article.title}</div>\n                <div className=\"name\">{article.name}</div>\n                <div className=\"desc\">{article.desc}</div>\n                <div className=\"date\">{article.date}</div>\n                <button onClick={editFn} data-key={article.key}>edit</button>\n                <button onClick={deleteFn} data-key={article.key}>delete</button>\n            </div>\n        );\n    }\n}\n\nArticle.propTypes = {\n    article: PropTypes.shape({\n        title: PropTypes.string.isRequired,\n        name: PropTypes.string.isRequired,\n        desc: PropTypes.string,\n        date: PropTypes.string.isRequired,\n    }),\n    editFn: PropTypes.func.isRequired,\n    deleteFn: PropTypes.func.isRequired,\n};\n\nexport default Article;\n","import React from 'react';\nimport * as firebase from 'firebase';\nimport moment from 'moment';\n\nimport Article from './Article';\n\nclass GuestBook extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            articles: {},\n            detail: {},\n            editMode: false,\n        };\n\n        this.database = firebase.database();\n\n        this.add = this.add.bind(this);\n        this.edit = this.edit.bind(this);\n        this.delete = this.delete.bind(this);\n        this.save = this.save.bind(this);\n        this.changeDetail = this.changeDetail.bind(this);\n    }\n\n    componentWillMount() {\n        this.database.ref('article').on('value', (articles) => {\n            let articleMap = {};\n\n            articles.forEach((article) => {\n                const articleVal = article.val();\n\n                articleMap[article.key] = {\n                    key: article.key,\n                    title: articleVal.title,\n                    name: articleVal.name,\n                    desc: articleVal.desc,\n                    date: articleVal.date,\n                };\n            });\n\n            this.setState({\n                articles: articleMap,\n            });\n        });\n    }\n\n    componentWillUnmount() {\n        this.database.ref('article').off('value');\n    }\n\n    add() {\n        this.setState({\n            editMode: true,\n            detail: {},\n        });\n    }\n\n    edit(e) {\n        let key = e.currentTarget.getAttribute('data-key');\n\n        this.setState({\n            editMode: true,\n            detail: Object.assign({}, this.state.articles[key]),\n        });\n    }\n\n    delete(e) {\n        let key = e.currentTarget.getAttribute('data-key');\n\n        this.database.ref('article/' + key).remove()\n            .then(() => {\n                alert('삭제 성공');\n            })\n            .catch(() => {\n                alert('삭제 실패');\n            });\n    }\n\n    save(e) {\n        e.preventDefault();\n\n        let detail = Object.assign({date: moment().format('YYYY/MM/DD')}, this.state.detail);\n\n        if (detail.key) {\n            // 수정\n            this.database.ref('article/' + detail.key).set(detail)\n                .then(() => {\n                    alert('수정 성공');\n                    this.setState({\n                        editMode: false,\n                    });\n                })\n                .catch(() => {\n                    alert('수정 실패');\n                });\n        } else {\n            // 추가\n            detail.key = this.state.detail.title + '-' + moment().format('YYYYMMDDhhmmss');\n\n            let articles = Object.assign({[detail.key]: detail}, this.state.articles);\n\n            this.database.ref('article').set(articles)\n                .then(() => {\n                    alert('추가 성공');\n                    this.setState({\n                        editMode: false,\n                    });\n                })\n                .catch(() => {\n                    alert('추가 실패');\n                });\n        }\n    }\n\n    changeDetail(e) {\n        this.setState({\n            detail: Object.assign({}, this.state.detail, {[e.target.name]: e.target.value}),\n        });\n    }\n\n    render() {\n        let articleHtmlList = [];\n\n        for (let key in this.state.articles) {\n            if (this.state.articles.hasOwnProperty(key)) {\n                let article = this.state.articles[key];\n                articleHtmlList.push(<Article article={article} editFn={this.edit} deleteFn={this.delete}/>);\n            }\n        }\n\n        return (\n            <div className=\"guest-book-wrap\">\n                {!this.state.editMode && <button className=\"btn\" onClick={this.add}>+</button>}\n                {\n                    this.state.editMode ?\n                        <form>\n                            <div className=\"form-item\">\n                                <label>title</label>\n                                <input name=\"title\" value={this.state.detail.title} onChange={this.changeDetail}/>\n                            </div>\n                            <div className=\"form-item\">\n                                <label>name</label>\n                                <input name=\"name\" value={this.state.detail.name} onChange={this.changeDetail}/>\n                            </div>\n                            <div className=\"form-item\">\n                                <label>desc</label>\n                                <input name=\"desc\" value={this.state.detail.desc} onChange={this.changeDetail}/>\n                            </div>\n                            <button onClick={this.save}>save</button>\n                        </form>\n                        :\n                        <div>\n                            {articleHtmlList}\n                        </div>\n                }\n            </div>\n        );\n    }\n}\n\nexport default GuestBook;\n","import React from 'react';\n\nclass Artist extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"artist-wrap\">\n                <div>yanghyeryung@gmail.com</div>\n                <div>https://yanghyeryung.github.io</div>\n                <div>https://github.com/yanghyeryung</div>\n            </div>\n        );\n    }\n}\n\nexport default Artist;\n","import React from 'react';\nimport Cookies from 'js-cookie';\n\nimport Gallery from './Gallery';\nimport GuestBook from './GuestBook';\nimport Artist from './Artist';\n\nclass Main extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            activeTabMode: 'gallery',\n            searchMode: false,\n        };\n\n        this.showSearchArt = this.showSearchArt.bind(this);\n        this.hideSearchArt = this.hideSearchArt.bind(this);\n        this.searchArt = this.searchArt.bind(this);\n        this.logout = this.logout.bind(this);\n        this.changeMode = this.changeMode.bind(this);\n    }\n\n    showSearchArt() {\n        this.setState({\n            searchMode: true,\n        });\n    }\n\n    hideSearchArt() {\n        this.setState({\n            searchMode: false,\n        });\n    }\n\n    searchArt(e) {\n        if (e.key === 'Enter') {\n            alert(this.refs.search.value);\n        }\n    }\n\n    logout() {\n        const {history} = this.props;\n\n        Cookies.remove('authToken');\n        history.push('/login');\n    }\n\n    changeMode(e) {\n        let mode = e.currentTarget.getAttribute('data-mode');\n\n        this.setState({\n            activeTabMode: mode,\n        });\n    }\n\n    render() {\n        const {activeTabMode, searchMode} = this.state;\n\n        return (\n            <div className=\"main-wrap\">\n                <div className=\"header\">\n                    <span className=\"title\">YangGallery</span>\n                    {\n                        searchMode ?\n                            <div className=\"search-wrap\">\n                                <input ref=\"search\" onKeyDown={this.searchArt}/>\n                                <button onClick={this.hideSearchArt}>x</button>\n                            </div>\n                            :\n                            <button onClick={this.showSearchArt}>search</button>\n                    }\n                    <button onClick={this.logout}>logout</button>\n                </div>\n                <button onClick={this.changeMode} data-mode=\"gallery\">Gallery</button>\n                <button onClick={this.changeMode} data-mode=\"guestbook\">GuestBook</button>\n                <button onClick={this.changeMode} data-mode=\"artist\">Artist</button>\n                {activeTabMode === 'gallery' && <Gallery />}\n                {activeTabMode === 'guestbook' && <GuestBook />}\n                {activeTabMode === 'artist' && <Artist />}\n            </div>\n        );\n    }\n}\n\nexport default Main;\n","import React from 'react';\nimport {HashRouter as Router, Route, Switch, Redirect} from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport Login from './views/Login';\nimport Main from './views/Main';\n\n\nfunction App() {\n  return (\n    <div className=\"app-view\">\n        <Router>\n            <Switch>\n                <Route exact path='/login' component={Login} />\n                <Route render={(props) => (\n                    Cookies.get('authToken') ? <Main {...props}/> : <Redirect to='/login'/>\n                )}/>\n            </Switch>\n        </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as firebase from 'firebase';\n\n// firebase setting\nlet firebaseConfig = {\n    apiKey: \"AIzaSyANJcTL5OSYVkWhJ2x1on4w242qq_AcqRY\",\n    authDomain: \"yang-gallery.firebaseapp.com\",\n    databaseURL: \"https://yang-gallery.firebaseio.com\",\n    projectId: \"yang-gallery\",\n    storageBucket: \"yang-gallery.appspot.com\",\n    messagingSenderId: \"1054961998752\",\n    appId: \"1:1054961998752:web:754a332c24ff3c244f22c5\"\n};\nfirebase.initializeApp(firebaseConfig);\n\n// render\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}